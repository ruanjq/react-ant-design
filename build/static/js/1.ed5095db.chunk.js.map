{"version":3,"sources":["service/index.js","layouts/NavBar.js","service/user.js","modules/tools.js","redux/actions/app_action.js","service/site.js","layouts/SideBar.js","layouts/Footer.js","layouts/Main.js"],"names":["service","axios","create","baseURL","timeout","cancelToken","interceptors","request","use","config","method","data","qs","parse","parameterLimit","Infinity","stringify","site","params","error","console","log","Promise","reject","response","res","status","isCancel","message","Option","menu","onClick","key","window","location","href","Item","rel","type","Divider","e","preventDefault","NavBar","props","handleChange","setState","currentSite","state","nextProps","nextState","this","is","userName","siteinfo","app","appInfo","userinfo","real_name","length","className","defaultValue","style","width","onChange","map","item","index","value","name","overlay","placement","React","Component","connect","ownProps","tools","throllte","fn","delay","canRun","ctx","args","arguments","setTimeout","call","debounce","timer","context","arg","clearTimeout","apply","queryString","str","pattern","RegExp","search","arr","match","exec","appInfoAction","dispatch","a","all","services","url","appData","result","forEach","authInfo","payload","SubMenu","MIN_BODY_WIDTH","MenuNode","list","defaultSelectedKeys","defaultKey","onOpenChange","openKeys","hanldClick","mode","theme","inlineCollapsed","collapsed","pitem","pindex","menus","title","sub_item","sub_index","children","ss_item","ss_index","SiderBar","closeCollapsed","toggleCollapsed","linkTo","history","push","document","body","clientWidth","pathname","menuData","toggleEventListener","autoOpenKey","_self","addEventListener","openCollapsed","currentUrl","Array","withRouter","Footer","h","src","height","scrolling","frameBorder","Main","matchPath","path","SideBar","routers","r","childRoutes","child_r","child_key","component","exact","from","to"],"mappings":"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","file":"static/js/1.ed5095db.chunk.js","sourcesContent":["import axios from 'axios';\nimport qs from 'qs';\nimport store from \"../redux/store\";\n// create an axios instance\nconst service = axios.create({\n    baseURL: \"\", // api的base_url\n    timeout: 60000, // request timeout\n    // headers: {\n    //     'X-Requested-With': 'XMLHttpRequest'\n    // },\n    cancelToken: null // 取消请求\n});\n\n// request interceptor\nservice.interceptors.request.use(config => {\n    // Do something before request is sent\n    // console.log(\"axios\",store.getState());\n    let website = \"zf\";\n    if (config.method === 'post') {\n        let data = qs.parse(config.data, {\n            parameterLimit: Infinity\n        })\n\n        config.data = qs.stringify({\n            site: website,\n            ...data\n        })\n    } else if (config.method === 'get') {\n        config.params = {\n            site: website,\n            ...config.params\n        }\n    }\n    // config.cancelToken = clearRequest0.source.token; // 取消请求\n    return config\n}, error => {\n    // Do something with request error\n    console.log(error) // for debug\n    Promise.reject(error)\n})\n\n// respone interceptor\nservice.interceptors.response.use(\n    response => {\n        const res = response.data\n        switch (res.status) {\n            case 200:\n                return res\n            case 403:\n                // logout()\n                break\n            default:\n\n                return res\n        }\n    },\n    error => { // 失败弹窗，取消不弹窗\n        if (axios.isCancel(error)) {\n            console.log('Request canceled', error.message);\n            return Promise.reject(error)\n        } else {\n            console.log('err' + error) // for debug\n\n            return Promise.reject(error)\n        }\n    }\n);\n\n\nexport default service;\n","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport { is } from 'immutable';\nimport { Select, Menu, Dropdown, Icon} from 'antd';\nimport {logout} from \"../service/user\";\nconst { Option } = Select;\n\n\nconst menuOnClick = ({ key }) =>{\n    switch(key){\n        case \"logout\":\n            logout();\n            break;\n        default:\n            break;\n    }\n}\n\nconst menu = (\n    <Menu onClick={menuOnClick}>\n        <Menu.Item key=\"home\">\n            <a rel=\"noopener noreferrer\" href=\"/\"><Icon type=\"home\" />&nbsp;&nbsp;首 页\n            </a>\n        </Menu.Item>\n        <Menu.Divider />\n        <Menu.Item  key=\"logout\">\n            <span  onClick={e => e.preventDefault()}><Icon type=\"poweroff\" />退出登录</span>\n        </Menu.Item>\n    </Menu>\n  );\n  \n\nclass NavBar extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            currentSite: 'ZF',\n        }\n    }\n    \n    shouldComponentUpdate(nextProps, nextState){\n        return !(this.props === nextProps || is(this.props, nextProps)) ||\n             !(this.state === nextState || is(this.state, nextState));\n    }\n    \n\n    handleChange = e => {\n        this.setState({\n            currentSite: e.key,\n        });\n    }\n\n    render() {\n        let userName = \"\";\n        let siteinfo = this.props.app.appInfo.siteinfo || [];\n        let {userinfo} = this.props.app.appInfo;\n        if(userinfo){\n            userName = userinfo.real_name;\n        }\n        if(siteinfo.length > 0){\n            this.state.currentSite = siteinfo[0].site\n        }\n        return (\n            <div className=\"nav-bar-wrapper clearfix\">\n                <span className=\"text\">站点:</span>\n                <div className=\"site-menu\">\n                    <Select defaultValue={this.state.currentSite} style={{ width: 150 }} onChange={this.handleChange}>\n                        {\n                            siteinfo.map((item,index) =>{\n                                return <Option key={item.site} value={item.site}>{item.name}</Option>\n                            })\n                        }\n                    </Select>\n                </div>\n                <div className=\"fr cursor-pointer\">\n                    <Dropdown overlay={menu} placement=\"bottomRight\">\n                        <span className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\n                        欢迎:{userName}&nbsp;<Icon type=\"down\" />\n                        </span>\n                    </Dropdown>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state,ownProps) => {\n    return {\n        app:state.app\n    }\n}\n\nexport default connect(mapStateToProps)(NavBar);","import services from './index';\n\n/**\n * 登出\n */\nexport function logout() {\n    window.location.href = '/admin/index/loginout'\n}\n\n/**\n * 获取用户信息\n */\nexport function getUserInfo() {\n    return services({\n        url: 'http://localhost:8891/src/JSON/myinfo.json',\n        method: 'GET',\n    })\n}","\nlet tools = {\n    throllte(fn,delay){\n        let canRun = true;\n        return function(){\n            if(!canRun) return;\n            let ctx = this,\n            args = arguments;\n            if(typeof fn === \"function\"){\n                canRun = false;\n                setTimeout(function(){\n                    fn.call(ctx,args);\n                    canRun = true;\n                },delay);\n            }\n        }\n    },\n    debounce(fn,delay){\n        var timer = null;\n        return function(){\n            var context = this,\n                arg = arguments;\n            clearTimeout(timer);\n            timer = setTimeout(function(){\n                fn.apply(context,arg);\n                timer = null;\n            },delay);\n        }\n    },\n    queryString(name,str){\n        /* eslint-disable-next-line */\n        var pattern = new RegExp(`[\\?&]${name}=([^&]+)`, 'g');\n        str = str || window.location.search;\n        var arr, match = '';\n        while ((arr = pattern.exec(str)) !== null) {\n            match = arr[1];\n        }\n\n        return match;\n    }\n}\n\n\n\nexport default tools","\nimport {getUserInfo} from \"../../service/user\";\nimport { getSite} from \"../../service/site\";\n\nexport const appInfoAction = async (dispatch) =>{\n    const res = await Promise.all([getUserInfo(),getSite()]);\n    // 聚合2个接口的数据\n    let appData = ((data) => {\n        let result = {};\n        data.forEach((item,key) =>{\n            if(key === 0){\n                if(item.data){\n                    result[\"authInfo\"] = item.data.authInfo;\n                    result[\"userinfo\"] = item.data.userinfo;\n                }\n            } else if(key === 1){\n                result[\"siteinfo\"] = item.data;\n            }\n        });\n        return result;\n    })(res);\n    // console.log(appData);\n    dispatch({\n        type:\"APP_INFO\",\n        payload:appData\n    });\n}\n\n","\nimport services from './index';\n\n\n\n/**\n * 获取站点信息\n */\nexport function getSite() {\n    return services({\n        url: 'http://localhost:8891/src/JSON/siteinfo.json',\n        method: 'GET',\n    })\n}","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport { Menu, Icon, Button } from 'antd';\nimport {withRouter} from \"react-router-dom\";\nimport tools from \"../modules/tools\";\nimport {appInfoAction} from \"../redux/actions/app_action\";\nconst { SubMenu } = Menu;\n\n \nconst MIN_BODY_WIDTH = 100;\n\n\n\nconst MenuNode = (props) =>{\n    let authInfo = props.list || [];\n    if(authInfo.length != 0){\n        return (\n            <Menu defaultSelectedKeys={props.defaultKey} onOpenChange={props.onOpenChange} openKeys={props.openKeys} onClick={props.hanldClick}  mode=\"inline\" theme=\"dark\" inlineCollapsed={props.collapsed}>\n                {\n                authInfo.map((pitem,pindex) => {\n                    if(pitem.menus.length){\n                        return (\n                            <SubMenu key={pindex}\n                                title={\n                                    <span>\n                                        <Icon type=\"appstore\" />\n                                        <span>{pitem.name}</span>\n                                    </span>\n                                }\n                            >\n                                {\n                                pitem.menus.map((sub_item,sub_index) => {\n                                    \n                                    if(sub_item.children.length){\n                                        \n                                        return (\n                                            <SubMenu key={pindex + \"\" + sub_index} title={ <span>{sub_item.name} </span> } >\n                                                {\n                                                    sub_item.children.map((ss_item,ss_index) => {\n                                                        return (\n                                                            <Menu.Item key={ss_item.url}>{ss_item.name}</Menu.Item>\n                                                        )\n                                                    })\n                                                }\n                                            </SubMenu>\n                                        )\n                                        \n                                    }else{\n                                        \n                                        return (<Menu.Item key={sub_item.url}>{sub_item.name}</Menu.Item>)\n                                    }\n                                })\n                                }\n                            </SubMenu>\n                        )\n                    }else{\n                        return (\n                            <Menu.Item key={pitem.url}>\n                                <Icon type=\"inbox\" />\n                                <span>{pitem.name}</span>\n                            </Menu.Item>\n                        )\n                    }\n                    \n                })\n                }\n            </Menu>\n        )\n    } else {\n        return null;\n    }\n}\n\n\nclass SiderBar extends React.Component{\n    constructor(props,context){\n        super(props,context);\n        this.state = {\n            collapsed: document.body.clientWidth <= MIN_BODY_WIDTH ? true : false,\n            openKeys:[],\n            defaultKey: this.props.location.pathname,\n            menuData:this.props.app.appInfo.authInfo || []\n        }\n    }\n    \n    UNSAFE_componentWillMount(){\n        this.toggleEventListener();\n        this.props.dispatch(appInfoAction);\n\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps){\n        if(this.props.app.appInfo.authInfo !== nextProps.app.appInfo.authInfo){\n            this.setState({\n                menuData:nextProps.app.appInfo.authInfo\n            })\n            \n            this.setState({openKeys :this.autoOpenKey(nextProps.app.appInfo.authInfo,this.state.defaultKey)});\n        }\n        if(this.props.location.pathname !== nextProps.location.pathname){\n            this.setState({\n                defaultKey:nextProps.location.pathname\n            })\n        }\n    }\n\n \n    onOpenChange = (openKeys) => {\n        this.setState({openKeys :openKeys});\n    }\n\n    toggleEventListener(){\n        let _self = this;\n        window.addEventListener(\"resize\",tools.throllte(function(e){\n            if(document.body.clientWidth <= MIN_BODY_WIDTH){\n                _self.closeCollapsed();\n            } else {\n                _self.openCollapsed();\n            }\n        },300));\n    }\n\n    autoOpenKey(menuData,currentUrl){\n        let result = [];\n        if(menuData instanceof Array){\n            menuData.forEach((pitem,pindex) => {\n                if(pitem.menus.length){\n                    pitem.menus.forEach((sub_item,sub_index) => {\n                        sub_item.children.forEach((ss_item,ss_index) => {\n                            if(ss_item.url === currentUrl){\n                                result =  ['' + pindex, pindex + '' + sub_index]\n                            }\n                        })\n                    })\n                }\n            })\n        }\n        return result;\n    }\n\n    openCollapsed() {\n        this.setState({\n            collapsed: false,\n        });\n        \n    }\n\n    closeCollapsed = () => {\n        this.setState({\n            collapsed: true,\n        });\n    }\n\n    toggleCollapsed = () => {\n        this.setState({\n            collapsed: !this.state.collapsed,\n        });\n        \n    }\n    \n    linkTo = (item) =>{\n        this.props.history.push(item.key);\n    }\n\n    render(){\n         \n        return (\n            <div className={`sider-bar-wrapper ${!this.state.collapsed ? \"sider-bar-open\":\"sider-bar-close\"}`} >\n                <Button type=\"primary\" className=\"collapsed-sidebar\" onClick={this.toggleCollapsed}>\n                <Icon type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'} />\n                </Button>\n                <div className=\"logo\">\n                    <a href=\"/\">\n                        <Icon type=\"shop\" />\n                        <span className={this.state.collapsed ? 'hidden':''}>Admin Stock</span>\n                    </a>\n                </div>\n                <div className=\"menu-box\">\n                    <MenuNode list={this.state.menuData} onOpenChange={this.onOpenChange} defaultKey={this.state.defaultKey} openKeys={this.state.openKeys} hanldClick={this.linkTo}></MenuNode>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state,ownProps) => {\n    return {\n        app:state.app\n    }\n}\n\n\n// 通过connect连接组件和redux数据和dispatch方法\nexport default withRouter(connect(mapStateToProps)(SiderBar));","import React from \"react\";\n\n\n\nclass Footer extends React.Component{\n    \n\n    render(h) {\n        return (\n            <div className=\"footer-wrapper\">\n                <iframe title=\"jsx-a11y/iframe-has-title\" src=\"http://www.gamiss.com/eload_admin/it.php\" width=\"100%\" height=\"70\" scrolling=\"no\" frameBorder=\"0\" className=\"iframe\"></iframe>\n            </div>\n        )\n    }\n}\n\nexport default Footer;\n\n\n","\n\n\nimport React,{Component} from \"react\";\nimport {Route, Switch,Redirect} from \"react-router-dom\";\nimport { Breadcrumb } from 'antd';\nimport { is } from 'immutable';\nimport routers from \"../routes/index\";\n\nimport NavBar from \"./NavBar\";\nimport SideBar from \"./SideBar\";\nimport Footer from \"./Footer\";\nimport \"../styles/App\";\nclass Main extends Component{\n\n    constructor(props){\n        super(props);\n       \n    }\n\n    shouldComponentUpdate(nextProps, nextState){\n        return !(this.props === nextProps || is(this.props, nextProps)) ||\n             !(this.state === nextState || is(this.state, nextState));\n    }\n    \n    render(){\n        let matchPath = this.props.match.path;\n        console.log(\"matchPath\",matchPath)\n        return (\n            <div className=\"main-content\">\n                <div className=\"left\">\n                    <SideBar></SideBar>\n                </div>\n                <div className=\"right\">\n                    <NavBar></NavBar>\n                    <div className=\"main-wrapper\">\n                        <Breadcrumb>\n                            <Breadcrumb.Item>Home</Breadcrumb.Item>\n                            <Breadcrumb.Item>\n                            <a href=\"/\">Application Center</a>\n                            </Breadcrumb.Item>\n                            <Breadcrumb.Item>\n                            <a href=\"/\">Application List</a>\n                            </Breadcrumb.Item>\n                            <Breadcrumb.Item>An Application</Breadcrumb.Item>\n                        </Breadcrumb>\n                        <div className=\"main-body\">\n                            {\n                                routers.map((r, key) => {\n                                    if(r.path === matchPath && r.childRoutes){\n                                        return <div key={key}>\n                                            {\n                                                r.childRoutes.map((child_r,child_key) =>{\n                                                    return <Route component={child_r.component} exact={!!child_r.exact} key={child_key} path={matchPath + \"\"+child_r.path} />;\n                                                })\n                                            }\n                                            {/* // 如果匹配不到默认重定向到index 这个路由 */}\n                                            <Redirect exact from={r.path} to={r.path + \"/index\"}/>\n                                        </div>\n                                    } \n                                })\n                            }\n                        </div>\n                    </div>\n                    <Footer></Footer>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Main;"],"sourceRoot":""}